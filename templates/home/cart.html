{% extends 'home/base.html' %}
{% block breadcrumb %}
<!-- Breadcrumb area Start -->
<div class="breadcrumb-area bg--white-6 breadcrumb-bg-1 pt--60 pb--70 pt-lg--40 pb-lg--50 pt-md--30 pb-md--40">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="page-title">Cart</h1>
                <ul class="breadcrumb justify-content-center">
                    <li><a href="/">Home</a></li>
                    <li class="current"><span>Cart</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb area End -->
{% endblock breadcrumb %}
{% block body %}
<div class="page-content-inner">
    <div class="container">
        <div class="row pt--80 pb--80 pt-md--45 pt-sm--25 pb-md--60 pb-sm--40">
            <div class="col-lg-8 mb-md--30">
                <form class="cart-form" action="#">
                    <div class="row g-0">
                        <div class="col-12">
                            <div class="table-content table-responsive">
                                <table class="table text-center">
                                    <thead>
                                        <tr>
                                            <th>&nbsp;</th>
                                            <th>&nbsp;</th>
                                            <th class="text-start">Product</th>
                                            <th>price</th>
                                            <th>quantity</th>
                                            <th>total</th>
                                        </tr>
                                    </thead>
                                    {% if cart_items %}
                                    <tbody>
                                        {% for product in cart_items %}
                                        <tr>
                                            <td class="product-remove text-start"><a
                                                    href="/remove-item/{{product.id}}"><i class="dl-icon-close"></i></a>
                                            </td>
                                            <td class="product-thumbnail text-start">
                                                <img src="{{product.product.product_image.url}}" alt="Product Thumnail"
                                                    style="width: 70px;height: 80px;">
                                            </td>
                                            <td class="product-name text-start wide-column">
                                                <h3>
                                                    <a href="/{{product.product.slug}}">{{product.product.title}}</a>
                                                </h3>
                                            </td>
                                            <td class="product-price">
                                                <span class="product-price-wrapper">
                                                    <span class="money">₹{{product.product.price}}</span>
                                                </span>
                                            </td>
                                            <td>
                                                <div class="product-quantity d-inline-flex">
                                                    <a href="/decrease-quantity/{{product.id}}" id="sub" class=""
                                                        style="border: none;background-color: white;color: black;">
                                                        -
                                                    </a>
                                                    <input type="number" class="quantity-input" name="quantity" id="qty"
                                                        value="{{product.quantity}}"
                                                        style="width: 50px;border: none;color: black;top: 0;" readonly>
                                                    <a href="/increase-quantity/{{product.id}}" id="add" class=""
                                                        style="border: none;background-color: white;color: black;">
                                                        +
                                                    </a>
                                                </div>
                                            </td>
                                            <td class="product-total-price">
                                                <span class="product-price-wrapper">
                                                    <span class="money"><strong>
                                                            ₹{%widthratio product.product.price 1 product.quantity%}
                                                        </strong></span>
                                                </span>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                    {% else %}
                                    <tbody>
                                        <tr></tr>
                                        <tr></tr>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>
                                                <h4><strong>Cart is Empty</strong></h4>
                                                <a href="/categories" style="text-decoration: underline;">
                                                    Shop Now
                                                </a>
                                            </td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                    {% endif %}
                                </table>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-lg-4">
                <div class="cart-collaterals">
                    <div class="cart-totals">
                        <h5 class="mb--15">Cart totals</h5>
                        <div class="table-content table-responsive">
                            <table class="table order-table">
                                <tbody>
                                    <tr>
                                        <th>Subtotal</th>
                                        <td>₹{{total}}</td>
                                    </tr>
                                    <tr>
                                        <th>Shipping</th>
                                        <td>
                                            <span>Flat rate: $20.00</span>
                                        </td>
                                    </tr>
                                    <tr class="order-total">
                                        <th>Total</th>
                                        <td>
                                            <span class="product-price-wrapper">
                                                <span class="money">₹{{total}}</span>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <a href="#" onclick="document.getElementById('confirm_address').classList.remove('hidden')"
                        class="btn btn-fullwidth btn-style-1">
                        Proceed To Checkout
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="grid lg:grid-cols-9 gap-4" style="z-index: 1000;">
    <div id="confirm_address" class="fixed z-50 rounded-lg inset-0 flex items-center justify-center hidden"
        style="left: 50%;top: 50%;transform: translate(-50%, -50%);min-width: 350px;">
        <div class="bg-white rounded-lg shadow-lg w-full p-6 border">
            <form method="post" action="/create-order">
                <div class="flex justify-between items-center border-b">
                    <div>
                        <label class="text-2xl text-black font-semibold mb-2">Address Details :</label><span
                            id=""></span>
                    </div>
                    <a class="text-gray-400 hover:text-gray-600"
                        onclick="document.getElementById('confirm_address').classList.add('hidden')">&times;</a>
                </div>
                <div class="text-gray-900 m-4">
                    {% load crispy_forms_tags %}
                    {% csrf_token %}
                    {{ form|crispy }}
                </div>
                <div class="grid grid-cols-1 gap-2 mt-2">
                    <div class="flex flex-col">
                        <button class="bg-gray-900 text-white px-4 py-2 rounded" type="submit">
                            Continue</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock body %}