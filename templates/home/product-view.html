{% extends 'home/base.html' %}
{% block breadcrumb %}
<div class="breadcrumb-area pt--70 pt-md--25">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <ul class="breadcrumb">
                    <li><a href="/">Home</a></li>
                    <li><a href="/categories">Shop Pages</a></li>
                    <li class="current"><span>{{product.title}}</span></li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock breadcrumb %}
{% block body %}
<div class="page-content-inner enable-full-width">
    <div class="container-fluid">
        <div class="row pt--40">
            <div class="col-md-6 product-main-image">
                <div class="product-image">
                    <div class="product-gallery vertical-slide-nav">
                        <div class="product-gallery__thumb">
                            <div class="product-gallery__thumb--image">
                                <div class="airi-element-carousel nav-slider slick-vertical" data-slick-options='{
                                    "slidesToShow": 3,
                                    "slidesToScroll": 1,
                                    "vertical": true,
                                    "swipe": true,
                                    "verticalSwiping": true,
                                    "infinite": true,
                                    "focusOnSelect": true,
                                    "asNavFor": ".main-slider",
                                    "arrows": true, 
                                    "prevArrow": {"buttonClass": "slick-btn slick-prev", "iconClass": "fa fa-angle-up" },
                                    "nextArrow": {"buttonClass": "slick-btn slick-next", "iconClass": "fa fa-angle-down" }
                                }' data-slick-responsive='[
                                    {
                                        "breakpoint":992, 
                                        "settings": {
                                            "slidesToShow": 4,
                                            "vertical": false
                                        } 
                                    },
                                    {
                                        "breakpoint":575, 
                                        "settings": {
                                            "slidesToShow": 3,
                                            "vertical": false
                                        } 
                                    },
                                    {
                                        "breakpoint":480, 
                                        "settings": {
                                            "slidesToShow": 2,
                                            "vertical": false
                                        } 
                                    }
                                ]'>
                                    <figure class="product-gallery__thumb--single">
                                        <img src="{{product.product_image.url}}" alt="Products">
                                    </figure>
                                    <figure class="product-gallery__thumb--single">
                                        <img src="{{product.second_image.url}}" alt="Products">
                                    </figure>
                                    {% for image in product_images %}
                                    <figure class="product-gallery__thumb--single">
                                        <img src="{{image.image.url}}" alt="Products">
                                    </figure>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        <div class="product-gallery__large-image">
                            <div class="gallery-with-thumbs">
                                <div class="product-gallery__wrapper">
                                    <div class="airi-element-carousel main-slider product-gallery__full-image image-popup"
                                        data-slick-options='{
                                        "slidesToShow": 1,
                                        "slidesToScroll": 1,
                                        "infinite": true,
                                        "arrows": false, 
                                        "asNavFor": ".nav-slider"
                                    }'>
                                        <figure class="product-gallery__image zoom">
                                            <img src="{{product.product_image.url}}" alt="Product">
                                        </figure>
                                        <figure class="product-gallery__image zoom">
                                            <img src="{{product.second_image.url}}" alt="Product">
                                        </figure>
                                        {% for image in product_images %}
                                        <figure class="product-gallery__image zoom">
                                            <img src="{{image.image.url}}" alt="Product">
                                        </figure>
                                        {% endfor %}
                                    </div>
                                    <div class="product-gallery__actions">
                                        <button class="action-btn btn-zoom-popup"><i
                                                class="dl-icon-zoom-in"></i></button>
                                        <a href="{{product.video_url}}" class="action-btn video-popup"><i
                                                class="dl-icon-format-video"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="product-badge new">New</span>
                </div>
            </div>
            <div class="col-md-6 product-main-details mt--40 mt-md--10 mt-sm--30">
                <div class="product-summary">
                    <div class="product-rating float-left">
                        <span>
                            {% for x in stars %}
                            <i class="dl-icon-star rated"></i>
                            {% endfor %}
                        </span>
                        <a href="#" class="review-link">(Customer's review)</a>
                    </div>
                    <!-- <div class="product-navigation">
                        <a href="#" class="prev"><i class="dl-icon-left"></i></a>
                        <a href="#" class="next"><i class="dl-icon-right"></i></a>
                    </div> -->
                    <div class="clearfix"></div>
                    <h3 class="product-title">{{product.title}}</h3>
                    <span class="product-stock in-stock float-right">
                        <i class="dl-icon-check-circle1"></i>
                        in stock
                    </span>
                    <div class="product-price-wrapper mb--40 mb-md--10">
                        <span class="money">₹{{product.price}}</span>
                        <span class="old-price">
                            <span class="money">₹{{product.before_discount_price}}</span>
                        </span>
                    </div>
                    <div class="clearfix"></div>
                    <p class="product-short-description mb--45 mb-sm--20">{{product.description|safe}}</p>
                    <form action="#" class="form--action mb--30 mb-sm--20">
                        <div class="product-action flex-row align-items-center">
                            <div class="quantity">
                                <input type="number" class="quantity-input" name="quantity" id="qty" value="1" min="1">
                            </div>
                            <div class="size_input" style="color: black;">
                                <select name="size" id="size" class="quantity-input">
                                    {% for size in product.sizes_available.all %}
                                    <option value="{{size.size}}">{{size.size}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <button type="button" class="btn btn-style-1 btn-large add-to-cart mt-4" onclick="addToCart()">
                            Add To Cart
                        </button>
                    </form>
                    <div class="product-extra mb--40">
                        <a href="/refundpolicy" class="font-size-12"><i class="fa fa-exchange"></i>Delivery and
                            return</a>
                    </div>
                    <div class="product-data-tab border-bottom pb--40 pb-md--30 pb-sm--20 tab-style-4">
                        <div class="nav nav-tabs product-data-tab__head mb--40 mb-sm--30" id="product-tab"
                            role="tablist">
                            <a class="product-data-tab__link nav-link active" id="nav-description-tab"
                                data-bs-toggle="tab" href="#nav-description" role="tab" aria-selected="true">
                                <span>Description</span>
                            </a>
                        </div>
                        <div class="tab-content product-data-tab__content" id="product-tabContent">
                            <div class="tab-pane fade show active" id="nav-description" role="tabpanel"
                                aria-labelledby="nav-description-tab">
                                <div class="product-description">
                                    <p>{{product.description|safe}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="product-summary-footer d-flex justify-content-between flex-sm-row flex-column mt--45 mt-md--35 mt-sm--25">
                        <div class="product-share-box">
                            <span class="font-size-12">Share With</span>
                            <!-- Social Icons Start Here -->
                            <ul class="social social-small">
                                <li class="social__item">
                                    <a href="https://facebook.com/" class="social__link">
                                        <i class="fa fa-facebook"></i>
                                    </a>
                                </li>
                                <li class="social__item">
                                    <a href="https://twitter.com/" class="social__link">
                                        <i class="fa fa-twitter"></i>
                                    </a>
                                </li>
                                <li class="social__item">
                                    <a href="https://plus.google.com/" class="social__link">
                                        <i class="fa fa-google-plus"></i>
                                    </a>
                                </li>
                                <li class="social__item">
                                    <a href="https://plus.google.com/" class="social__link">
                                        <i class="fa fa-pinterest-p"></i>
                                    </a>
                                </li>
                            </ul>
                            <!-- Social Icons End Here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row pt--30 pt-md--20 pt-sm--15 pb--75 pb-md--55 pb-sm--35">
            <div class="col-12">
                <div class="row mb--40 mb-md--30">
                    <div class="col-12 text-center">
                        <h2 class="heading-secondary">Related Products</h2>
                        <hr class="separator center mt--25 mt-md--15">
                    </div>
                </div>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                    {% for product in related_products %}
                    <div class="airi-product">
                        <div class="product-inner">
                            <figure class="product-image">
                                <div class="product-image--holder">
                                    <a href="/product-view/{{product.id}}">
                                        <img src="{{product.product_image.url}}" alt="Product Image"
                                            class="w-16 h-44">
                                        <img src="{{product.product_image.url}}" alt="Product Image"
                                            class="secondary-image">
                                    </a>
                                </div>
                                <div class="airi-product-action">
                                    <div class="product-action">
                                        <a class="add_to_cart_btn action-btn" href="cart.html"
                                            data-bs-toggle="tooltip" data-bs-placement="left" title=""
                                            data-bs-original-title="Add to Cart">
                                            <i class="dl-icon-cart29"></i>
                                        </a>
                                    </div>
                                </div>
                                <!-- <span class="product-badge new">New</span> -->
                            </figure>
                            <a href="/product-view/{{product.id}}" class="mb-2">
                                <p class="text-gray-900 pt-3 font-semibold line-clamp-custom">
                                    {{product.title}}
                                </p>
                                <span class="product-price-wrapper">
                                    <span class="money">₹{{product.price}}</span>
                                    <span class="product-price-old">
                                        <span class="money">₹{{product.before_discount_price}}</span>
                                    </span>
                                </span>
                                <p class="">
                                    {% for size in product.sizes_available.all %}
                                    <span class="text-gray-400">{{size.size}}</span>
                                    {% endfor %}
                                </p>
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function addToCart() {
        let sizeValue = document.querySelector('select[name="size"]').value;  // Get the selected size value from the select element
        let quantity = document.querySelector('input[name="quantity"]').value;  // Get the quantity value from the input element
        location.href=`/add-to-cart/{{product.id}}/${sizeValue}/${quantity}`
    }
</script>
{% endblock body %}